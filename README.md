# vcs-bot-ts

基于 typescript 的 QQ bot，正在开发中

## 模块构建中

- core
  - 模块管理器
    - 加载和卸载模块
    - 依赖加载
    - 退出时进行 unload
  - 事件管理器
    - 基于原生 EventEmitter
    - 方法名有略微修改
- data
  - 持久化数据
  - 启动时加载，关闭时保存(或者手动保存)
  - 路径作为key
  - 映射到文件夹下的yaml
- http
  - 以 http 形式接入 QQ 客户端
  - 提供事件触发
  - 提供 api 调用(异步)
  - 可以把
- log
  - 依赖于 data
  - 记录事件
    - 按照日期和区域进行文件夹分类
  - 目前需要解耦一下 []
  - 大概需要每天定时保存下来，或者达量清缓存 []
- queue
  - 工具模块
  - 用于将异步任务提交到队列
  - 返回 Promise
- api
  - http 的包装，提供更多补全
  - 目前并没有什么用
- bot
  - bot 对象
  - 全局唯一
  - 区域对象
- context
  - 打算重新构建一个模型，封装 QQ 客户端，cli，
  - 每个区域都能提交事件，事件中提供 context 对象，context 对象含有区域对象本身
  - 区域对象本身可以提供一些 api

## 任务列表

- 自动回复管理
   - 通过命令创建自动回复规则
   - 通过命令编辑现有规则
   - 通过命令删除规则
   - 通过命令查看所有规则

- 命令系统管理
   - 通过命令添加新命令
   - 通过命令编辑现有命令
   - 通过命令删除命令
   - 通过命令查看所有可用命令

- 文档系统
   - 基于文件夹的文档存储
   - 支持纯文本、图片和文件存储
   - 记录文档创建/修改日期和发送者信息
   - 支持目录和标签功能
   - 通过命令进行增删查改操作

- Minecraft服务器监控和交互
   - 实时监控本地MC服务器运行状态（通过screen）
   - 转发玩家聊天消息
   - 向MC服务器发送单个或多个命令
   - 支持发送包含数据包的命令

- 资源包管理
   - 实时更新服务器资源包
   - 与GitHub同步
   - 自动递增版本号
   - 打包文件并生成直链
   - 接收并合并新的资源包文件

- 物理机监控
   - 查看服务器性能状态（CPU、内存、硬盘等）

- 额外功能
   - "免费抱抱"指令
